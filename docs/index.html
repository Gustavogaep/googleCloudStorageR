<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Interface with Google Cloud Storage API • googleCloudStorageR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Interface with Google Cloud Storage API">
<meta property="og:description" content="Interact with Google Cloud Storage &lt;https://cloud.google.com/storage/&gt; 
  API in R. Part of the 'cloudyr' &lt;https://cloudyr.github.io/&gt; project.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">googleCloudStorageR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/googleCloudStorageR.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://cloud.google.com/storage/">
    <span class="fa fa-google fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/cloudyr/googleCloudStorageR">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://docs.google.com/forms/d/e/1FAIpQLSerjirmMpB3b7LmBs_Vx_XPIE9IrhpCpPg1jUcpfBcivA3uBw/viewform">
    <span class="fa fa-slack fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
<div id="googlecloudstorager" class="section level1">

<p>R library for interacting with the Google Cloud Storage JSON API (<a href="https://cloud.google.com/storage/docs/json_api/">api docs</a>).</p>
<div id="setup" class="section level2">
<h2 class="hasAnchor">
<a href="#setup" class="anchor"></a>Setup</h2>
<p>Google Cloud Storage charges you for storage <a href="https://cloud.google.com/storage/pricing">(prices here)</a>.</p>
<p>You can use your own Google Project with a credit card added to create buckets, where the charges will apply. This can be done in the <a href="https://console.developers.google.com">Google API Console</a></p>
</div>
<div id="configuring-your-own-google-project" class="section level2">
<h2 class="hasAnchor">
<a href="#configuring-your-own-google-project" class="anchor"></a>Configuring your own Google Project</h2>
<p>The instructions below are for when you visit the Google API console (<code>https://console.developers.google.com/apis/</code>)</p>
<div id="for-local-use" class="section level3">
<h3 class="hasAnchor">
<a href="#for-local-use" class="anchor"></a>For local use</h3>
<ol>
<li>Click ‘Create a new Client ID’, and choose <strong>“Installed Application”</strong>.</li>
<li>Download the client ID JSON.</li>
<li>
<p>Set the client ID via <code><a href="https://code.markedmondson.me/googleAuthR//reference/gar_set_client.html">googleAuthR::gar_set_client()</a></code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"> googleAuthR<span class="op">::</span><span class="kw"><a href="https://code.markedmondson.me/googleAuthR//reference/gar_set_client.html">gar_set_client</a></span>(<span class="st">"your-json-file.json"</span>)</a></code></pre></div>
</li>
</ol>
</div>
<div id="for-shiny-use" class="section level3">
<h3 class="hasAnchor">
<a href="#for-shiny-use" class="anchor"></a>For Shiny use</h3>
<ol>
<li>Click ‘Create a new Client ID’, and choose <strong>“Web Application”</strong>.</li>
<li>Download the client ID JSON.</li>
<li>Add the URL of where your Shiny app will run, with no port number. e.g. <code>https://mark.shinyapps.io/searchConsoleRDemo/</code>
</li>
<li>And/Or also put in localhost or 127.0.0.1 with a port number for local testing. Remember the port number you use as you will need it later to launch the app e.g. <code>http://127.0.0.1:1221</code>
</li>
<li>
<p>Set the web client ID via <code><a href="https://code.markedmondson.me/googleAuthR//reference/gar_set_client.html">googleAuthR::gar_set_client()</a></code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"> googleAuthR<span class="op">::</span><span class="kw"><a href="https://code.markedmondson.me/googleAuthR//reference/gar_set_client.html">gar_set_client</a></span>(<span class="dt">web_json =</span> <span class="st">"your-json-file.json"</span>)</a></code></pre></div>
</li>
<li>To run the app locally specifying the port number you used in step 4 e.g. <code><a href="https://www.rdocumentation.org/packages/shiny/topics/runApp">shiny::runApp(port=1221)</a></code> or set a shiny option to default to it: <code><a href="https://www.rdocumentation.org/packages/base/topics/options">options(shiny.port = 1221)</a></code> and launch via the <code>RunApp</code> button in RStudio.</li>
<li><p>Running on your Shiny Server will work only for the URL from step 3.</p></li>
</ol>
</div>
<div id="activate-api" class="section level3">
<h3 class="hasAnchor">
<a href="#activate-api" class="anchor"></a>Activate API</h3>
<ol>
<li>Click on “APIs”</li>
<li>Select and activate the Cloud Storage JSON API</li>
<li>After loading the package via <code><a href="https://www.rdocumentation.org/packages/base/topics/library">library(googleCloudStorage)</a></code>, it will look to see if <code>"https://www.googleapis.com/auth/devstorage.full_control"</code> is set in <code><a href="https://www.rdocumentation.org/packages/base/topics/options">getOption("googleAuthR.scopes.selected")</a></code> and set it if it is not, adding to the existing scopes.<br>
</li>
<li>
<p>Alternativly, set the <code>googleAuthR</code> option for Google Cloud storage scope after the library has been loaded but before authentication.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">options</a></span>(<span class="dt">googleAuthR.scopes.selected =</span> <span class="st">"https://www.googleapis.com/auth/devstorage.full_control"</span>)</a></code></pre></div>
</li>
</ol>
</div>
<div id="setting-environment-variables" class="section level3">
<h3 class="hasAnchor">
<a href="#setting-environment-variables" class="anchor"></a>Setting environment variables</h3>
<p>By default, all cloudyr packages look for the access key ID and secret access key in environment variables. You can also use this to specify a default bucket, and auto-authentication upon attaching the library. For example:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Sys.setenv">Sys.setenv</a></span>(<span class="st">"GCS_DEFAULT_BUCKET"</span> =<span class="st"> "my-default-bucket"</span>,</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">           <span class="st">"GCS_AUTH_FILE"</span> =<span class="st"> "/fullpath/to/service-auth.json"</span>)</a></code></pre></div>
<p>These can alternatively be set on the command line or via an Renviron.site or .Renviron file (<a href="https://cran.r-project.org/web/packages/httr/vignettes/api-packages.html">see here for instructions</a>).</p>
</div>
<div id="auto-authentication" class="section level3">
<h3 class="hasAnchor">
<a href="#auto-authentication" class="anchor"></a>Auto-authentication</h3>
<p>To authenticate, you specify the location of a service account JSON file taken from your Google Project:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">    <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Sys.setenv">Sys.setenv</a></span>(<span class="st">"GCS_AUTH_FILE"</span> =<span class="st"> "/fullpath/to/auth.json"</span>)</a></code></pre></div>
</div>
</div>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
<div id="setting-a-default-bucket" class="section level3">
<h3 class="hasAnchor">
<a href="#setting-a-default-bucket" class="anchor"></a>Setting a default Bucket</h3>
<p>To avoid specifying the bucket in the functions below, you can set the name of your default bucket via environmental variables or via the function <code><a href="reference/gcs_global_bucket.html">gcs_global_bucket()</a></code>. See the <code>Setting environment variables</code> section below for more details.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co">## set bucket via environment</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Sys.setenv">Sys.setenv</a></span>(<span class="st">"GCS_DEFAULT_BUCKET"</span> =<span class="st"> "my-default-bucket"</span>)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(googleCloudStorageR)</a>
<a class="sourceLine" id="cb6-5" data-line-number="5"></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">## check what the default bucket is</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="kw"><a href="reference/gcs_get_global_bucket.html">gcs_get_global_bucket</a></span>()</a>
<a class="sourceLine" id="cb6-8" data-line-number="8">[<span class="dv">1</span>] <span class="st">"my-default-bucket"</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">## you can also set a default bucket after loading the library for that session</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="kw"><a href="reference/gcs_global_bucket.html">gcs_global_bucket</a></span>(<span class="st">"your-default-bucket-2"</span>)</a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="kw"><a href="reference/gcs_get_global_bucket.html">gcs_get_global_bucket</a></span>()</a>
<a class="sourceLine" id="cb6-13" data-line-number="13">[<span class="dv">1</span>] <span class="st">"my-default-bucket-2"</span></a></code></pre></div>
</div>
<div id="downloading-objects-from-google-cloud-storage" class="section level3">
<h3 class="hasAnchor">
<a href="#downloading-objects-from-google-cloud-storage" class="anchor"></a>Downloading objects from Google Cloud storage</h3>
<p>Once you have a Google project and created a bucket with an object in it, you can download it as below:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(googleCloudStorageR)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co">## get your project name from the API console</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4">proj &lt;-<span class="st"> "your-project"</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">## get bucket info</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7">buckets &lt;-<span class="st"> </span><span class="kw"><a href="reference/gcs_list_buckets.html">gcs_list_buckets</a></span>(proj)</a>
<a class="sourceLine" id="cb7-8" data-line-number="8">bucket &lt;-<span class="st"> "your-bucket"</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9">bucket_info &lt;-<span class="st"> </span><span class="kw"><a href="reference/gcs_get_bucket.html">gcs_get_bucket</a></span>(bucket)</a>
<a class="sourceLine" id="cb7-10" data-line-number="10">bucket_info</a>
<a class="sourceLine" id="cb7-11" data-line-number="11"></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="op">==</span>Google Cloud Storage Bucket<span class="op">==</span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13">Bucket<span class="op">:</span><span class="st">          </span>your<span class="op">-</span>bucket</a>
<a class="sourceLine" id="cb7-14" data-line-number="14">Project Number<span class="op">:</span><span class="st">  </span><span class="dv">1123123123</span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15">Location<span class="op">:</span><span class="st">        </span>EU</a>
<a class="sourceLine" id="cb7-16" data-line-number="16">Class<span class="op">:</span><span class="st">           </span>STANDARD</a>
<a class="sourceLine" id="cb7-17" data-line-number="17">Created<span class="op">:</span><span class="st">         </span><span class="dv">2016-04-28</span> <span class="dv">11</span><span class="op">:</span><span class="dv">39</span><span class="op">:</span><span class="dv">06</span></a>
<a class="sourceLine" id="cb7-18" data-line-number="18">Updated<span class="op">:</span><span class="st">         </span><span class="dv">2016-04-28</span> <span class="dv">11</span><span class="op">:</span><span class="dv">39</span><span class="op">:</span><span class="dv">06</span></a>
<a class="sourceLine" id="cb7-19" data-line-number="19">Meta<span class="op">-</span>generation<span class="op">:</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb7-20" data-line-number="20">eTag<span class="op">:</span><span class="st">            </span>Cxx=</a>
<a class="sourceLine" id="cb7-21" data-line-number="21"></a>
<a class="sourceLine" id="cb7-22" data-line-number="22"></a>
<a class="sourceLine" id="cb7-23" data-line-number="23"><span class="co">## get object info in the default bucket</span></a>
<a class="sourceLine" id="cb7-24" data-line-number="24">objects &lt;-<span class="st"> </span><span class="kw"><a href="reference/gcs_list_objects.html">gcs_list_objects</a></span>()</a>
<a class="sourceLine" id="cb7-25" data-line-number="25"></a>
<a class="sourceLine" id="cb7-26" data-line-number="26"><span class="co">## save directly to an R object (warning, don't run out of RAM if its a big object)</span></a>
<a class="sourceLine" id="cb7-27" data-line-number="27"><span class="co">## the download type is guessed into an appropriate R object</span></a>
<a class="sourceLine" id="cb7-28" data-line-number="28">parsed_download &lt;-<span class="st"> </span><span class="kw"><a href="reference/gcs_get_object.html">gcs_get_object</a></span>(objects<span class="op">$</span>name[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb7-29" data-line-number="29"></a>
<a class="sourceLine" id="cb7-30" data-line-number="30"><span class="co">## if you want to do your own parsing, set parseObject to FALSE</span></a>
<a class="sourceLine" id="cb7-31" data-line-number="31"><span class="co">## use httr::content() to parse afterwards</span></a>
<a class="sourceLine" id="cb7-32" data-line-number="32">raw_download &lt;-<span class="st"> </span><span class="kw"><a href="reference/gcs_get_object.html">gcs_get_object</a></span>(objects<span class="op">$</span>name[[<span class="dv">1</span>]],</a>
<a class="sourceLine" id="cb7-33" data-line-number="33">                               <span class="dt">parseObject =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb7-34" data-line-number="34"></a>
<a class="sourceLine" id="cb7-35" data-line-number="35"><span class="co">## save directly to a file in your working directory</span></a>
<a class="sourceLine" id="cb7-36" data-line-number="36"><span class="co">## parseObject has no effect, it is a httr::content(req, "raw") download</span></a>
<a class="sourceLine" id="cb7-37" data-line-number="37"><span class="kw"><a href="reference/gcs_get_object.html">gcs_get_object</a></span>(objects<span class="op">$</span>name[[<span class="dv">1</span>]], <span class="dt">saveToDisk =</span> <span class="st">"csv_downloaded.csv"</span>)</a></code></pre></div>
</div>
</div>
<div id="uploading-objects-5mb" class="section level2">
<h2 class="hasAnchor">
<a href="#uploading-objects-5mb" class="anchor"></a>Uploading objects &lt; 5MB</h2>
<p>Objects can be uploaded via files saved to disk, or passed in directly if they are data frames or list type R objects. By default, data frames will be converted to CSV via <code><a href="https://www.rdocumentation.org/packages/utils/topics/write.table">write.csv()</a></code>, lists to JSON via <code><a href="https://www.rdocumentation.org/packages/jsonlite/topics/fromJSON">jsonlite::toJSON</a></code>.</p>
<p>If you want to use other functions for transforming R objects, for example setting <code>row.names = FALSE</code> or using <code>write.csv2</code>, pass the function through <code>object_function</code></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co">## upload a file - type will be guessed from file extension or supply type</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/write.table">write.csv</a></span>(mtcars, <span class="dt">file =</span> filename)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="kw"><a href="reference/gcs_upload.html">gcs_upload</a></span>(filename)</a>
<a class="sourceLine" id="cb8-4" data-line-number="4"></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">## upload an R data.frame directly - will be converted to csv via write.csv</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="kw"><a href="reference/gcs_upload.html">gcs_upload</a></span>(mtcars)</a>
<a class="sourceLine" id="cb8-7" data-line-number="7"></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">## upload an R list - will be converted to json via jsonlite::toJSON</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="kw"><a href="reference/gcs_upload.html">gcs_upload</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">a =</span> <span class="dv">1</span>, <span class="dt">b =</span> <span class="dv">3</span>, <span class="dt">c =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">d =</span> <span class="dv">2</span>, <span class="dt">e =</span> <span class="dv">5</span>)))</a>
<a class="sourceLine" id="cb8-10" data-line-number="10"></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="co">## upload an R data.frame directly, with a custom function</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="co">## function should have arguments 'input' and 'output'</span></a>
<a class="sourceLine" id="cb8-13" data-line-number="13"><span class="co">## safest to supply type too</span></a>
<a class="sourceLine" id="cb8-14" data-line-number="14">f &lt;-<span class="st"> </span><span class="cf">function</span>(input, output) <span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/write.table">write.csv</a></span>(input, <span class="dt">row.names =</span> <span class="ot">FALSE</span>, <span class="dt">file =</span> output)</a>
<a class="sourceLine" id="cb8-15" data-line-number="15"></a>
<a class="sourceLine" id="cb8-16" data-line-number="16"><span class="kw"><a href="reference/gcs_upload.html">gcs_upload</a></span>(mtcars,</a>
<a class="sourceLine" id="cb8-17" data-line-number="17">           <span class="dt">object_function =</span> f,</a>
<a class="sourceLine" id="cb8-18" data-line-number="18">           <span class="dt">type =</span> <span class="st">"text/csv"</span>)</a></code></pre></div>
</div>
<div id="upload-metadata" class="section level2">
<h2 class="hasAnchor">
<a href="#upload-metadata" class="anchor"></a>Upload metadata</h2>
<p>You can pass metadata with an object via the function <code><a href="reference/gcs_metadata_object.html">gcs_metadata_object()</a></code>.</p>
<p>the name you pass to the metadata object will override the name if it is also set elsewhere.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">meta &lt;-<span class="st"> </span><span class="kw"><a href="reference/gcs_metadata_object.html">gcs_metadata_object</a></span>(<span class="st">"mtcars.csv"</span>,</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">                             <span class="dt">metadata =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">custom1 =</span> <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">                                             <span class="dt">custom_key =</span> <span class="st">'dfsdfsdfsfs))</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="st">gcs_upload(mtcars, object_metadata = meta)</span></a></code></pre></div>
</div>
<div id="resumable-uploads-for-files-5mb-up-to-5tb" class="section level2">
<h2 class="hasAnchor">
<a href="#resumable-uploads-for-files-5mb-up-to-5tb" class="anchor"></a>Resumable uploads for files &gt; 5MB up to 5TB</h2>
<p>If the file/object is under 5MB, simple uploads are used.</p>
<p>For files &gt; 5MB, <a href="https://cloud.google.com/storage/docs/json_api/v1/how-tos/upload#resumable">resumable uploads</a> are used. This allows you to upload up to 5TB.</p>
<p>If you get an interrupted connection when uploading, <code>gcs_upload</code> will retry 3 times, if it fails it will return a Retry object, that you can try again later from where the upload stopped. Call this via <code>gcs_retry_upload</code></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co">## write a big object to a file</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2">big_file &lt;-<span class="st"> "big_filename.csv"</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/write.table">write.csv</a></span>(big_object, <span class="dt">file =</span> big_file)</a>
<a class="sourceLine" id="cb10-4" data-line-number="4"></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co">## attempt upload</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6">upload_try &lt;-<span class="st"> </span><span class="kw"><a href="reference/gcs_upload.html">gcs_upload</a></span>(big_file)</a>
<a class="sourceLine" id="cb10-7" data-line-number="7"></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="co">## if successful, upload_try is an object metadata object</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9">upload_try</a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="op">==</span>Google Cloud Storage Object<span class="op">==</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11">Name<span class="op">:</span><span class="st">            "big_filename.csv"</span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12">Size<span class="op">:</span><span class="st">            </span><span class="fl">8.5</span> Gb</a>
<a class="sourceLine" id="cb10-13" data-line-number="13">Media URL        https<span class="op">:</span><span class="er">//</span>www.googleapis.com<span class="op">/</span>download<span class="op">/</span>storage<span class="op">/</span>v1<span class="op">/</span>b<span class="op">/</span>xxxx</a>
<a class="sourceLine" id="cb10-14" data-line-number="14">Bucket<span class="op">:</span><span class="st">          </span>your<span class="op">-</span>bucket</a>
<a class="sourceLine" id="cb10-15" data-line-number="15">ID<span class="op">:</span><span class="st">              </span>your<span class="op">-</span>bucket<span class="op">/</span><span class="st">"test.pdf"</span><span class="op">/</span>xxxx</a>
<a class="sourceLine" id="cb10-16" data-line-number="16">MD5 Hash<span class="op">:</span><span class="st">        </span>rshao1nxxxxxY68JZQ<span class="op">==</span></a>
<a class="sourceLine" id="cb10-17" data-line-number="17">Class<span class="op">:</span><span class="st">           </span>STANDARD</a>
<a class="sourceLine" id="cb10-18" data-line-number="18">Created<span class="op">:</span><span class="st">         </span><span class="dv">2016-08-12</span> <span class="dv">17</span><span class="op">:</span><span class="dv">33</span><span class="op">:</span><span class="dv">05</span></a>
<a class="sourceLine" id="cb10-19" data-line-number="19">Updated<span class="op">:</span><span class="st">         </span><span class="dv">2016-08-12</span> <span class="dv">17</span><span class="op">:</span><span class="dv">33</span><span class="op">:</span><span class="dv">05</span></a>
<a class="sourceLine" id="cb10-20" data-line-number="20">Generation<span class="op">:</span><span class="st">      </span><span class="dv">1471023185977000</span></a>
<a class="sourceLine" id="cb10-21" data-line-number="21">Meta Generation<span class="op">:</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb10-22" data-line-number="22">eTag<span class="op">:</span><span class="st">            </span>CKi90xxxxxEAE=</a>
<a class="sourceLine" id="cb10-23" data-line-number="23">crc32c<span class="op">:</span><span class="st">          </span>j4i1sQ<span class="op">==</span></a>
<a class="sourceLine" id="cb10-24" data-line-number="24"></a>
<a class="sourceLine" id="cb10-25" data-line-number="25"></a>
<a class="sourceLine" id="cb10-26" data-line-number="26"><span class="co">## if unsuccessful after 3 retries, upload_try is a Retry object</span></a>
<a class="sourceLine" id="cb10-27" data-line-number="27"><span class="er">==</span>Google Cloud Storage Upload Retry Object<span class="op">==</span></a>
<a class="sourceLine" id="cb10-28" data-line-number="28">File Location<span class="op">:</span><span class="st">     </span>big_filename.csv</a>
<a class="sourceLine" id="cb10-29" data-line-number="29">Retry Upload URL<span class="op">:</span><span class="st">  </span>http<span class="op">:</span><span class="er">//</span>xxxx</a>
<a class="sourceLine" id="cb10-30" data-line-number="30">Created<span class="op">:</span><span class="st">           </span><span class="dv">2016-08-12</span> <span class="dv">17</span><span class="op">:</span><span class="dv">33</span><span class="op">:</span><span class="dv">05</span></a>
<a class="sourceLine" id="cb10-31" data-line-number="31">Type<span class="op">:</span><span class="st">              </span>csv</a>
<a class="sourceLine" id="cb10-32" data-line-number="32">File Size<span class="op">:</span><span class="st">        </span><span class="fl">8.5</span> Gb</a>
<a class="sourceLine" id="cb10-33" data-line-number="33">Upload Byte<span class="op">:</span><span class="st">      </span><span class="dv">4343</span></a>
<a class="sourceLine" id="cb10-34" data-line-number="34">Upload remaining<span class="op">:</span><span class="st"> </span><span class="fl">8.1</span> Gb</a>
<a class="sourceLine" id="cb10-35" data-line-number="35"></a>
<a class="sourceLine" id="cb10-36" data-line-number="36"><span class="co">## you can retry to upload the remaining data using gcs_retry_upload()</span></a>
<a class="sourceLine" id="cb10-37" data-line-number="37">try2 &lt;-<span class="st"> </span><span class="kw"><a href="reference/gcs_retry_upload.html">gcs_retry_upload</a></span>(upload_try)</a></code></pre></div>
</div>
<div id="updating-user-access-to-objects" class="section level2">
<h2 class="hasAnchor">
<a href="#updating-user-access-to-objects" class="anchor"></a>Updating user access to objects</h2>
<p>You can change who can access objects via <code>gcs_update_acl</code> to one of <code>READER</code> or <code>OWNER</code>, on a user, group, domain, project or public for all users or authenticated users.</p>
<p>By default you are “OWNER” of all the objects and buckets you upload and create.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co">## update access of object to READER for all public</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="kw"><a href="reference/gcs_update_object_acl.html">gcs_update_object_acl</a></span>(<span class="st">"your-object.csv"</span>, <span class="dt">entity_type =</span> <span class="st">"allUsers"</span>)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="co">## update access of object for user joe@blogs.com to OWNER</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="kw">gcs_update_acl</span>(<span class="st">"your-object.csv"</span>,</a>
<a class="sourceLine" id="cb11-6" data-line-number="6">               <span class="dt">entity =</span> <span class="st">"joe@blogs.com"</span>,</a>
<a class="sourceLine" id="cb11-7" data-line-number="7">               <span class="dt">role =</span> <span class="st">"OWNER"</span>)</a>
<a class="sourceLine" id="cb11-8" data-line-number="8"></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="co">## update access of object for googlegroup users to READER</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="kw"><a href="reference/gcs_update_object_acl.html">gcs_update_object_acl</a></span>(<span class="st">"your-object.csv"</span>,</a>
<a class="sourceLine" id="cb11-11" data-line-number="11">                      <span class="dt">entity =</span> <span class="st">"my-group@googlegroups.com"</span>,</a>
<a class="sourceLine" id="cb11-12" data-line-number="12">                      <span class="dt">entity_type =</span> <span class="st">"group"</span>)</a>
<a class="sourceLine" id="cb11-13" data-line-number="13"></a>
<a class="sourceLine" id="cb11-14" data-line-number="14"><span class="co">## update access of object for all users to OWNER on your Google Apps domain</span></a>
<a class="sourceLine" id="cb11-15" data-line-number="15"><span class="kw"><a href="reference/gcs_update_object_acl.html">gcs_update_object_acl</a></span>(<span class="st">"your-object.csv"</span>,</a>
<a class="sourceLine" id="cb11-16" data-line-number="16">                      <span class="dt">entity =</span> <span class="st">"yourdomain.com"</span>,</a>
<a class="sourceLine" id="cb11-17" data-line-number="17">                      <span class="dt">entity_type =</span> <span class="st">"domain"</span>,</a>
<a class="sourceLine" id="cb11-18" data-line-number="18">                      <span class="dt">role =</span> OWNER)</a></code></pre></div>
</div>
<div id="deleting-an-object" class="section level2">
<h2 class="hasAnchor">
<a href="#deleting-an-object" class="anchor"></a>Deleting an object</h2>
<p>Delete an object by passing its name (and bucket if not default)</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="co">## returns TRUE is successful, a 404 error if not found</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="kw"><a href="reference/gcs_delete_object.html">gcs_delete_object</a></span>(<span class="st">"your-object.csv"</span>)</a></code></pre></div>
<div id="viewing-current-access-level-to-objects" class="section level3">
<h3 class="hasAnchor">
<a href="#viewing-current-access-level-to-objects" class="anchor"></a>Viewing current access level to objects</h3>
<p>Use <code><a href="reference/gcs_get_object_acl.html">gcs_get_object_acl()</a></code> to see what the current access is for an <code>entity</code> + <code>entity_type</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co">## default entity_type is user</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2">acl &lt;-<span class="st"> </span><span class="kw"><a href="reference/gcs_get_object_acl.html">gcs_get_object_acl</a></span>(<span class="st">"your-object.csv"</span>,</a>
<a class="sourceLine" id="cb13-3" data-line-number="3">                         <span class="dt">entity =</span> <span class="st">"joe@blogs.com"</span>)</a>
<a class="sourceLine" id="cb13-4" data-line-number="4">acl<span class="op">$</span>role</a>
<a class="sourceLine" id="cb13-5" data-line-number="5">[<span class="dv">1</span>] <span class="st">"OWNER"</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="co">## for allUsers and allAuthenticated users, you don't need to supply entity</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8">acl &lt;-<span class="st"> </span><span class="kw"><a href="reference/gcs_get_object_acl.html">gcs_get_object_acl</a></span>(<span class="st">"your-object.csv"</span>,</a>
<a class="sourceLine" id="cb13-9" data-line-number="9">                          <span class="dt">entity_type =</span> <span class="st">"allUsers"</span>)</a>
<a class="sourceLine" id="cb13-10" data-line-number="10">acl<span class="op">$</span>role</a>
<a class="sourceLine" id="cb13-11" data-line-number="11">[<span class="dv">1</span>] <span class="st">"READER"</span></a></code></pre></div>
</div>
<div id="creating-download-links" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-download-links" class="anchor"></a>Creating download links</h3>
<p>Once a user (or group or the public) has access, they can reach that object via a download link generated by the function <code>gcs_download_url</code></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">download_url &lt;-<span class="st"> </span><span class="kw"><a href="reference/gcs_download_url.html">gcs_download_url</a></span>(<span class="st">"your-object.csv"</span>)</a>
<a class="sourceLine" id="cb14-2" data-line-number="2">download_url</a>
<a class="sourceLine" id="cb14-3" data-line-number="3">[<span class="dv">1</span>] <span class="st">"https://storage.cloud.google.com/your-project/your-object.csv"</span></a></code></pre></div>
</div>
<div id="signed-urls" class="section level3">
<h3 class="hasAnchor">
<a href="#signed-urls" class="anchor"></a>Signed URLs</h3>
<p>You can create temporary links for users who may not have a Google account, but still need to be private. This is achieved using the <code>gcs_signed_url</code> function, which you pass a meta object too.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">obj &lt;-<span class="st"> </span><span class="kw"><a href="reference/gcs_get_object.html">gcs_get_object</a></span>(<span class="st">"your_file"</span>, <span class="dt">meta =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb15-2" data-line-number="2"></a>
<a class="sourceLine" id="cb15-3" data-line-number="3">signed &lt;-<span class="st"> </span><span class="kw"><a href="reference/gcs_signed_url.html">gcs_signed_url</a></span>(obj)</a></code></pre></div>
<p>The default is for the link to be accessible for an hour, but you can alter that:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="co">## a link that will expire in 24 hours (86400 seconds) from now.</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2">24hours_signed &lt;-<span class="st"> </span><span class="kw"><a href="reference/gcs_signed_url.html">gcs_signed_url</a></span>(obj, <span class="dt">expiration_ts =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Sys.time">Sys.time</a></span>() <span class="op">+</span><span class="st"> </span><span class="dv">86400</span>)</a></code></pre></div>
</div>
</div>
<div id="r-session-helpers" class="section level2">
<h2 class="hasAnchor">
<a href="#r-session-helpers" class="anchor"></a>R Session helpers</h2>
<p>Versions of <code><a href="https://www.rdocumentation.org/packages/base/topics/save">save.image()</a></code>, <code><a href="https://www.rdocumentation.org/packages/base/topics/save">save()</a></code> and <code><a href="https://www.rdocumentation.org/packages/base/topics/load">load()</a></code> are implemented called <code><a href="reference/gcs_save_image.html">gcs_save_image()</a></code>, <code><a href="reference/gcs_save.html">gcs_save()</a></code> and <code><a href="reference/gcs_load.html">gcs_load()</a></code>. These functions save and load the global R session to the cloud.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="co">## save the current R session including all objects</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="kw"><a href="reference/gcs_save_image.html">gcs_save_image</a></span>()</a>
<a class="sourceLine" id="cb17-3" data-line-number="3"></a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="co">### wipe environment</span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rm">rm</a></span>(<span class="dt">list =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ls">ls</a></span>())</a>
<a class="sourceLine" id="cb17-6" data-line-number="6"></a>
<a class="sourceLine" id="cb17-7" data-line-number="7"><span class="co">## load up environment again</span></a>
<a class="sourceLine" id="cb17-8" data-line-number="8"><span class="kw"><a href="reference/gcs_load.html">gcs_load</a></span>()</a></code></pre></div>
<p>Save specific objects:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">cc &lt;-<span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2">d &lt;-<span class="st"> "test1"</span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="kw"><a href="reference/gcs_save.html">gcs_save</a></span>(<span class="st">"cc"</span>,<span class="st">"d"</span>, <span class="dt">file =</span> <span class="st">"gcs_save_test.RData"</span>)</a>
<a class="sourceLine" id="cb18-4" data-line-number="4"></a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="co">## remove the objects saved in cloud from local environment</span></a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rm">rm</a></span>(cc,d)</a>
<a class="sourceLine" id="cb18-7" data-line-number="7"></a>
<a class="sourceLine" id="cb18-8" data-line-number="8"><span class="co">## load them back in from GCS</span></a>
<a class="sourceLine" id="cb18-9" data-line-number="9"><span class="kw"><a href="reference/gcs_load.html">gcs_load</a></span>(<span class="dt">file =</span> <span class="st">"gcs_save_test.RData"</span>)</a>
<a class="sourceLine" id="cb18-10" data-line-number="10">cc <span class="op">==</span><span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb18-11" data-line-number="11">[<span class="dv">1</span>] <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb18-12" data-line-number="12">d <span class="op">==</span><span class="st"> "test1"</span></a>
<a class="sourceLine" id="cb18-13" data-line-number="13">[<span class="dv">1</span>] <span class="ot">TRUE</span></a></code></pre></div>
<p>You can also upload <code>.R</code> code files and source them directly using <code>gcs_source</code>:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co">## make a R source file and upload it</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cat">cat</a></span>(<span class="st">"x &lt;- 'hello world!'</span><span class="ch">\n</span><span class="st">x"</span>, <span class="dt">file =</span> <span class="st">"example.R"</span>)</a>
<a class="sourceLine" id="cb19-3" data-line-number="3"><span class="kw"><a href="reference/gcs_upload.html">gcs_upload</a></span>(<span class="st">"example.R"</span>, <span class="dt">name =</span> <span class="st">"example.R"</span>)</a>
<a class="sourceLine" id="cb19-4" data-line-number="4"></a>
<a class="sourceLine" id="cb19-5" data-line-number="5"><span class="co">## source the file to run its code</span></a>
<a class="sourceLine" id="cb19-6" data-line-number="6"><span class="kw"><a href="reference/gcs_source.html">gcs_source</a></span>(<span class="st">"example.R"</span>)</a>
<a class="sourceLine" id="cb19-7" data-line-number="7"></a>
<a class="sourceLine" id="cb19-8" data-line-number="8"><span class="co">## the code from the upload file has run</span></a>
<a class="sourceLine" id="cb19-9" data-line-number="9">x</a>
<a class="sourceLine" id="cb19-10" data-line-number="10">[<span class="dv">1</span>] <span class="st">"hello world!"</span></a></code></pre></div>
</div>
<div id="uploading-via-a-shiny-app" class="section level2">
<h2 class="hasAnchor">
<a href="#uploading-via-a-shiny-app" class="anchor"></a>Uploading via a Shiny app</h2>
<p>The library is also compatible with Shiny authentication flows, so you can create Shiny apps that lets users log in and upload their own data.</p>
<p>An example of that is shown below:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">"shiny"</span>)</a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">"googleAuthR"</span>)</a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">"googleCloudStorageR"</span>)</a>
<a class="sourceLine" id="cb20-4" data-line-number="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">options</a></span>(<span class="dt">googleAuthR.scopes.selected =</span> <span class="st">"https://www.googleapis.com/auth/devstorage.full_control"</span>)</a>
<a class="sourceLine" id="cb20-5" data-line-number="5"><span class="co">## optional, if you want to use your own Google project</span></a>
<a class="sourceLine" id="cb20-6" data-line-number="6"><span class="co"># options("googleAuthR.client_id" = "YOUR_CLIENT_ID")</span></a>
<a class="sourceLine" id="cb20-7" data-line-number="7"><span class="co"># options("googleAuthR.client_secret" = "YOUR_CLIENT_SECRET")</span></a>
<a class="sourceLine" id="cb20-8" data-line-number="8"></a>
<a class="sourceLine" id="cb20-9" data-line-number="9"><span class="co">## you need to start Shiny app on port 1221</span></a>
<a class="sourceLine" id="cb20-10" data-line-number="10"><span class="co">## as thats what the default googleAuthR project expects for OAuth2 authentication</span></a>
<a class="sourceLine" id="cb20-11" data-line-number="11"></a>
<a class="sourceLine" id="cb20-12" data-line-number="12"><span class="co">## options(shiny.port = 1221)</span></a>
<a class="sourceLine" id="cb20-13" data-line-number="13"><span class="co">## print(source('shiny_test.R')$value) or push the "Run App" button in RStudio</span></a>
<a class="sourceLine" id="cb20-14" data-line-number="14"></a>
<a class="sourceLine" id="cb20-15" data-line-number="15"><span class="kw"><a href="https://www.rdocumentation.org/packages/shiny/topics/shinyApp">shinyApp</a></span>(</a>
<a class="sourceLine" id="cb20-16" data-line-number="16">  <span class="dt">ui =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/shiny/topics/shinyUI">shinyUI</a></span>(</a>
<a class="sourceLine" id="cb20-17" data-line-number="17">      <span class="kw"><a href="https://www.rdocumentation.org/packages/shiny/topics/fluidPage">fluidPage</a></span>(</a>
<a class="sourceLine" id="cb20-18" data-line-number="18">        googleAuthR<span class="op">::</span><span class="kw"><a href="https://code.markedmondson.me/googleAuthR//reference/googleAuthUI.html">googleAuthUI</a></span>(<span class="st">"login"</span>),</a>
<a class="sourceLine" id="cb20-19" data-line-number="19">        <span class="kw"><a href="https://www.rdocumentation.org/packages/shiny/topics/fileInput">fileInput</a></span>(<span class="st">"picture"</span>, <span class="st">"picture"</span>),</a>
<a class="sourceLine" id="cb20-20" data-line-number="20">        <span class="kw"><a href="https://www.rdocumentation.org/packages/shiny/topics/textInput">textInput</a></span>(<span class="st">"filename"</span>, <span class="dt">label =</span> <span class="st">"Name on Google Cloud Storage"</span>,<span class="dt">value =</span> <span class="st">"myObject"</span>),</a>
<a class="sourceLine" id="cb20-21" data-line-number="21">        <span class="kw"><a href="https://www.rdocumentation.org/packages/shiny/topics/actionButton">actionButton</a></span>(<span class="st">"submit"</span>, <span class="st">"submit"</span>),</a>
<a class="sourceLine" id="cb20-22" data-line-number="22">        <span class="kw"><a href="https://www.rdocumentation.org/packages/shiny/topics/textOutput">textOutput</a></span>(<span class="st">"meta_file"</span>)</a>
<a class="sourceLine" id="cb20-23" data-line-number="23">      )</a>
<a class="sourceLine" id="cb20-24" data-line-number="24">  ),</a>
<a class="sourceLine" id="cb20-25" data-line-number="25">  <span class="dt">server =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/shiny/topics/shinyServer">shinyServer</a></span>(<span class="cf">function</span>(input, output, session){</a>
<a class="sourceLine" id="cb20-26" data-line-number="26"></a>
<a class="sourceLine" id="cb20-27" data-line-number="27">    access_token &lt;-<span class="st"> </span>shiny<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/shiny/topics/callModule">callModule</a></span>(googleAuth, <span class="st">"login"</span>)</a>
<a class="sourceLine" id="cb20-28" data-line-number="28"></a>
<a class="sourceLine" id="cb20-29" data-line-number="29">    meta &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/shiny/topics/observeEvent">eventReactive</a></span>(input<span class="op">$</span>submit, {</a>
<a class="sourceLine" id="cb20-30" data-line-number="30"></a>
<a class="sourceLine" id="cb20-31" data-line-number="31">      <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/message">message</a></span>(<span class="st">"Uploading to Google Cloud Storage"</span>)</a>
<a class="sourceLine" id="cb20-32" data-line-number="32"></a>
<a class="sourceLine" id="cb20-33" data-line-number="33">      <span class="co"># from googleCloudStorageR</span></a>
<a class="sourceLine" id="cb20-34" data-line-number="34">      <span class="kw"><a href="https://code.markedmondson.me/googleAuthR//reference/with_shiny.html">with_shiny</a></span>(gcs_upload,</a>
<a class="sourceLine" id="cb20-35" data-line-number="35">                 <span class="dt">file =</span> input<span class="op">$</span>picture<span class="op">$</span>datapath,</a>
<a class="sourceLine" id="cb20-36" data-line-number="36">                 <span class="co"># enter your bucket name here</span></a>
<a class="sourceLine" id="cb20-37" data-line-number="37">                 <span class="dt">bucket =</span> <span class="st">"gogauth-test"</span>,</a>
<a class="sourceLine" id="cb20-38" data-line-number="38">                 <span class="dt">type =</span> input<span class="op">$</span>picture<span class="op">$</span>type,</a>
<a class="sourceLine" id="cb20-39" data-line-number="39">                 <span class="dt">name =</span> input<span class="op">$</span>filename,</a>
<a class="sourceLine" id="cb20-40" data-line-number="40">                 <span class="dt">shiny_access_token =</span> <span class="kw">access_token</span>())</a>
<a class="sourceLine" id="cb20-41" data-line-number="41"></a>
<a class="sourceLine" id="cb20-42" data-line-number="42">    })</a>
<a class="sourceLine" id="cb20-43" data-line-number="43"></a>
<a class="sourceLine" id="cb20-44" data-line-number="44">    output<span class="op">$</span>meta_file &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/shiny/topics/renderText">renderText</a></span>({</a>
<a class="sourceLine" id="cb20-45" data-line-number="45"></a>
<a class="sourceLine" id="cb20-46" data-line-number="46">      <span class="kw"><a href="https://www.rdocumentation.org/packages/shiny/topics/req">req</a></span>(<span class="kw">meta</span>())</a>
<a class="sourceLine" id="cb20-47" data-line-number="47"></a>
<a class="sourceLine" id="cb20-48" data-line-number="48">      <span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(<span class="kw">meta</span>())</a>
<a class="sourceLine" id="cb20-49" data-line-number="49"></a>
<a class="sourceLine" id="cb20-50" data-line-number="50">      <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(<span class="st">"Uploaded: "</span>, <span class="kw">meta</span>()<span class="op">$</span>name)</a>
<a class="sourceLine" id="cb20-51" data-line-number="51"></a>
<a class="sourceLine" id="cb20-52" data-line-number="52">    })</a>
<a class="sourceLine" id="cb20-53" data-line-number="53"></a>
<a class="sourceLine" id="cb20-54" data-line-number="54">  })</a>
<a class="sourceLine" id="cb20-55" data-line-number="55">)</a></code></pre></div>
</div>
<div id="bucket-administration" class="section level2">
<h2 class="hasAnchor">
<a href="#bucket-administration" class="anchor"></a>Bucket administration</h2>
<p>There are various functions to manipulate Buckets:</p>
<ul>
<li><code>gcs_list_buckets</code></li>
<li><code>gcs_get_bucket</code></li>
<li><code>gcs_create_bucket</code></li>
</ul>
</div>
<div id="object-administration" class="section level2">
<h2 class="hasAnchor">
<a href="#object-administration" class="anchor"></a>Object administration</h2>
<p>You can get meta data about an object by passing <code>meta=TRUE</code> to <code>gcs_get_object</code></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw"><a href="reference/gcs_get_object.html">gcs_get_object</a></span>(<span class="st">"your-object"</span>, <span class="st">"your-bucket"</span>, <span class="dt">meta =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p><a href="http://cran.r-project.org/package=googleCloudStorageR"><img src="http://www.r-pkg.org/badges/version/googleCloudStorageR" alt="CRAN"></a> <a href="https://travis-ci.org/cloudyr/googleCloudStorageR"><img src="https://travis-ci.org/cloudyr/googleCloudStorageR.png?branch=master" alt="Build Status"></a> <a href="http://codecov.io/github/cloudyr/googleCloudStorageR?branch=master"><img src="http://codecov.io/github/cloudyr/googleCloudStorageR/coverage.svg?branch=master" alt="codecov.io"></a></p>
<p>This package is on CRAN:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="co"># latest stable version</span></a>
<a class="sourceLine" id="cb22-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"googleCloudStorageR"</span>)</a></code></pre></div>
<p>Or, to pull a potentially unstable version directly from GitHub:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="cf">if</span>(<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(<span class="st">"ghit"</span>)){</a>
<a class="sourceLine" id="cb23-2" data-line-number="2">    <span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"ghit"</span>)</a>
<a class="sourceLine" id="cb23-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb23-4" data-line-number="4">ghit<span class="op">::</span><span class="kw">install_github</span>(<span class="st">"cloudyr/googleCloudStorageR"</span>)</a></code></pre></div>
<hr>
<p><a href="https://github.com/cloudyr"><img src="http://i.imgur.com/JHS98Y7.png" alt="cloudyr project logo"></a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=googleCloudStorageR">https://​cloud.r-project.org/​package=googleCloudStorageR</a>
</li>
<li>Report a bug at <br><a href="https://github.com/cloudyr/googleCloudStorageR/issues">https://​github.com/​cloudyr/​googleCloudStorageR/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing googleCloudStorageR</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="http://code.markedmondson.me">Mark Edmondson</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-8434-3881" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID" height="16"></a> </li>
</ul>
</div>

  </div>
</div>

      <footer><div class="copyright">
  <p>Developed by <a href="http://code.markedmondson.me">Mark Edmondson</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
